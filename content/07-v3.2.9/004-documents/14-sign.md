---
slug: "/post15"
title: "Как подписать документ"
sort: "15"
---

**ВАЖНО!**  Чтобы подписывать документы, у вас на рабочем месте должен быть установлен криптопровайдер КриптоПро CSP.  

Чтобы подписывать документы электронной подписью, нужно установить в Личное хранилище сертификат с закрытым ключом.  

Подписать документы вы можете в мастере **Подписи и шифрования** в разделе  **Документы**.

Вы можете подписать любые произвольные документы, загрузив их с помощью drag-and-drop либо выбрать файлы из вкладки **Архив**.

#  Как подписать документ, используя профиль подписи

Создайте профиль подписи, в котором заданы настройки подписи.

1. Перейдите в раздел **Документы**.
2. Откройте мастер **Подписи и шифрования**.
4. Выберите профиль подписи, в котором заданы настройки подписи. 
    При выборе профиля в мастере автоматически заполняются **Настройки операций**, **Сертификат подписи**, каталоги сохранения результатов подписи.
5. Добавьте документы в список с помощью drag-and-drop или кнопок **Загрузить с компьютера**, **Добавить из Архива**.
6. Нажмите кнопку **Выполнить**.

#  Как подписать документ, используя настройки операций в мастере, не изменяя выбранного профиля
Если вы хотите изменить параметры подписи, не изменяя настройки в профиле, то воспользуйтесь настройками в открытом мастере.

1. Перейдите в раздел **Документы**.
2. Откройте мастер **Подписи и шифрования**.
4. Включите на верхней панели операцию **Подписать**. В **Настройках операций** становятся доступны параметры подписи.
5. Установите параметры подписи (вид, кодировку, стандарт), выберите сертификат подписи и настройте каталоги сохранения подписанных файлов.
6. Для операции подписи можно выбрать только один сертификат из категории **Личные**, у которого есть привязка к закрытому ключу. Для этого:
   - нажмите на поле **Сертификат подписи**;
   - в развернувшемся списке выберите сертификат.
    Если в списке нет подходящего сертификата, то нажмите **Показать все сертификаты** и в открывшейся боковой панели выберите нужный сертификат.
7. Добавьте документы в список.
8. Нажмите кнопку **Выполнить**.

#  Как подписать документ сертификатом DSS

Подпись сертификатом DSS ничем не отличается от подписи обычным сертификатом, за исключением некоторых шагов.   

1. При выборе сертификата подписи DSS некоторые настройки операции подписи, такие как выбор стандарта подписи и установка штампов времени, недоступны.  
2. При нажатии на кнопку **Выполнить** открывается:
- Окно для ввода пароля к ключевому контейнеру. Введите пароль.  
   Если пароль не задан, то данный шаг пропускается.
- Окно для ввода пароля для аутентификации на сервисе DSS, если для аутентификации задан пароль и время действия токена аутентификации истекло. Введите пароль.  
  Если токен аутентификации не истек, то данный шаг пропускается.
- Окно для подтверждения аутентификации на сервисе DSS, если для аутентификации задан вход по сим карте или по мобильному приложению, и время действия токена 
аутентификации истекло. Подтвердите операцию входа на сервис на устройстве.  
   Если токен аутентификации не истек, то данный шаг пропускается.
- Окно ожидания подтверждения операции подписи, если в настройках аутентификации стоит подтверждение операции подписи по сим карте или с помощью мобильного приложения.  
  Подтвердите операцию на устройстве.

***Примечание:*** для DSS подписи наличие лицензии на программный продукт КриптоПро CSP необязательно.

# Как создать подпись со штампом времени (TSP)

Служба штампов времени используется для простановки штампов времени на
документы. Данные, защищенные электронной подписью Службы, содержат надежную
информацию о времени существования электронного документа. Штампы времени
используются для привязки факта существования каких-либо данных ко времени.

Создать подпись со штампом времени  вы можете только при установленном модуле
КриптоПро TSP Client и лицензии на него.

1. Перейдите в раздел **Документы**.
2. Откройте мастер **Подписи и шифрования**.
4. Создайте профиль подписи  или выберите в настройках операции с включенной опцией **Подпись** следующие параметры подписи:
   - **стандарт — cms**, вид, кодировку, выберите сертификат подписи и настройте каталоги сохранения подписанных файлов;
    - включите опцию **Штамп времени на подпись**, если требуется поставить штамп на подпись;
    - включите опцию **Штамп времени на подписываемые данные**, если требуется поставить штамп на данные;
    - заполните в поле **Служба штампов времени (TSP)** адрес службы, который можно узнать у поставщика услуги. Например, услуги службы штампов времени могут предоставлять удостоверяющие центры. Формат адреса: \<протокол\>://\<сервер\>[:порт][/путь]. В качестве протокола может быть указан "http" и "https".
    - **Использовать прокси-сервер** — если при подключении к службе TSP используется прокси-сервер, то установка флага активирует его настройки: **Адрес прокси-сервера, Порт, Логин, Пароль,** которые можно узнать у системного администратора.
5. Добавьте документы в список.
6. Нажмите кнопку **Выполнить**.

# Как создать усовершенствованную подпись

Усовершенствованная квалифицированная электронная подпись поможет доказать юридическую значимость документа в спорных ситуациях. Например, когда помимо
авторства и целостности документа (которые дает обычная КЭП) необходимо подтвердить, что сертификат был действителен в момент подписания документа.

Формат усовершенствованной подписи предусматривает включение в электронную подпись информации о времени создания подписи (TSP) и о статусе сертификата
электронной подписи (OCSP) в момент подписания.

Вы можете создать усовершенствованную подпись только при наличии установленных модулях TSP Client и OCSP Client и лицензий на них.

1. Перейдите в раздел **Документы**.
2. Откройте мастер **Подписи и шифрования**.
4. Создайте профиль подписи  или выберите в настройках операции с включенной опцией **Подпись** следующие параметры подписи:
   - **стандарт — CAdES-X Type 1**, вид, кодировку, выберите сертификат подписи и настройте каталоги сохранения подписанных файлов;
   - заполните в поле **Служба штампов времени (TSP)** адрес службы, который можно узнать у поставщика услуги. Например, услуги службы штампов времени могут предоставлять удостоверяющие центры. Формат адреса: \<протокол\>://\<сервер\>[:порт][/путь]. В качестве протокола может быть указан "http" и "https".
   - при необходимости, заполните поле **Служба онлайн статусов (OCSP)** — адрес службы OCSP. Данное поле не обязательно для заполнение, чаще адрес прописан в самом сертификате, которым создается подпись.
    - **Использовать прокси-сервер** — если при подключении к службе TSP используется прокси-сервер, то установка флага активирует его настройки: **Адрес прокси-сервера, Порт, Логин, Пароль,** которые можно узнать у системного администратора.
5. Добавьте документы в список.
6. Нажмите кнопку **Выполнить**.

# Результат выполнения операции

На вкладке **Подпись и шифрование** отображаются ход и результаты выполнения операции.

При успешном выполнении операции подписанные файлы сохраняются в заданном каталоге, если выбран каталог для сохранения результатов, или рядом с исходным файлом, если каталог не задан.  

Если установлен флаг **Создать копию в Архиве**, то копия подписанных документов сохраняется в специальную папку, документы которой доступны в разделе **Документы — вкладка Архив**.   

***Примечание:** если в настройках подписи выбрана отсоединённая подпись, то в заданный каталог и в **Архив** кроме файла подписи создается копия исходного файла.

Вы можете посмотреть информацию о подписи, выделив документ в списке и нажав иконку просмотра ![view-button.jpg](./images/view-button.jpg "Кнопка быстрого просмотра").

Если какие-то документы не удалось подписать, то операция считается выполненной с ошибками. Вы можете посмотреть какие файлы подписались успешно, а какие с ошибками. 

Ошибки при операции выводятся как уведомления. Вы можете их посмотреть, нажав на иконку ![notifications-button.jpg](./images/notifications-button.jpg "События").  

Для просмотра подробного описания ошибки или отправки в техническую поддержку нажмите кнопку **Перейти в журнал** в правой боковой панели списка уведомлений.

**ВОЗМОЖНЫЕ УВЕДОМЛЕНИЯ:**

1. Не удалось открыть файл — добавленные в мастер документы были удалены или по какой-то причине доступны, добавлен пустой файл (с нулевым размером).
5. Не удалось подписать файл — ошибка в адресе службы штампов времени, если подпись со штампом или усовершенствованная. Ошибка подключения к  прокси-серверу. 
6. Не удалось подписать файл — ошибки, связанные с истекшими лицензиями КриптоПро TSP Client, OCSP Client, КриптоПро CSP.


**ИНСТРУКЦИИ ПО ТЕМЕ:**  
1. [Как установить личный сертификат.](https://docs.cryptoarm.ru/07-v3.2.9/008-certs/01-import-my-cert)  
2. [Как создать профиль подписи.](https://docs.cryptoarm.ru/07-v3.2.9/004-documents/02-create-profile)   
3. [Как переключаться между профилями подписи.](https://docs.cryptoarm.ru/07-v3.2.9/004-documents/08-select-profile)    
4. [Как добавить документы в мастер.](https://docs.cryptoarm.ru/07-v3.2.9/004-documents/12-add-docs)  
5. [Как выбрать сертификат подписи.](https://docs.cryptoarm.ru/07-v3.2.9/004-documents/10-select-sign-cert)    
6. [Как посмотреть уведомления.](https://docs.cryptoarm.ru/07-v3.2.9/007-cryptoarm/02-notifications)  
7. [Действия с результатами операций.](https://docs.cryptoarm.ru/07-v3.2.9/004-documents/23-operations-result)    
8. [Как проверить подпись документа.](https://docs.cryptoarm.ru/07-v3.2.9/004-documents/18-verify)   
